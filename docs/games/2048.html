<!doctype html><meta charset="utf-8"><title>2048</title>
<style>
body{margin:0;background:#12151f;color:#fff;font-family:system-ui,Arial}
h1{font-size:18px;margin:12px;text-align:center}
#game{width:340px;margin:10px auto;background:#1c2340;padding:10px;border-radius:10px}
.row{display:flex}
.cell{width:75px;height:75px;margin:5px;border-radius:8px;display:flex;align-items:center;justify-content:center;
background:#242b57;font-weight:700;font-size:22px;transition:.08s}
.n2{background:#2d356d}.n4{background:#38407c}.n8{background:#45508f}.n16{background:#5360a1}
.n32{background:#6270b3}.n64{background:#7281c4}.n128{background:#8392d2}.n256{background:#95a3df}
.n512{background:#a9b5ea}.n1024{background:#bdc6f3}.n2048{background:#d2d8fa;color:#111}
#bar{width:340px;margin:0 auto 10px;display:flex;gap:8px;align-items:center;justify-content:center}
button{background:#2f376e;color:#fff;border:0;border-radius:6px;padding:8px 12px;cursor:pointer}
</style>
<h1>2048 (WASD / Arrow keys)</h1>
<div id="bar"><button onclick="reset()">New Game</button><span id="score">Score: 0</span></div>
<div id="game"></div>
<script>
let size=4,grid=[],score=0,game=document.getElementById('game'),scoreEl=document.getElementById('score');
function init(){grid=Array.from({length:size},()=>Array(size).fill(0));score=0;spawn();spawn();draw()}
function draw(){
game.innerHTML='';
grid.forEach(r=>{
let row=document.createElement('div');row.className='row';
r.forEach(v=>{
let c=document.createElement('div');c.className='cell'+(v?(' n'+v):'');c.textContent=v||'';
row.appendChild(c);
});
game.appendChild(row);
});
scoreEl.textContent='Score: '+score;
}
function spawn(){
let empties=[];
for(let y=0;y<size;y++)for(let x=0;x<size;x++)if(!grid[y][x])empties.push([y,x]);
if(!empties.length)return false;
let [y,x]=empties[Math.random()*empties.length|0];
grid[y][x]=Math.random()<.9?2:4;return true;
}
function rotate(times=1){while(times--){const ng=Array.from({length:size},()=>Array(size).fill(0));
for(let y=0;y<size;y++)for(let x=0;x<size;x++)ng[x][size-1-y]=grid[y][x];grid=ng}}
function compressRow(r){
r=r.filter(v=>v);for(let i=0;i<r.length-1;i++)if(r[i]&&r[i]==r[i+1]){r[i]*=2;score+=r[i];r[i+1]=0}
return r.filter(v=>v).concat(Array(size).fill(0)).slice(0,size)
}
function move(dir){
let before=JSON.stringify(grid);
// 0:left 1:up 2:right 3:down via rotations
if(dir==0){for(let y=0;y<size;y++)grid[y]=compressRow(grid[y])}
if(dir==2){rotate(2);for(let y=0;y<size;y++)grid[y]=compressRow(grid[y]);rotate(2)}
if(dir==1){rotate(3);for(let y=0;y<size;y++)grid[y]=compressRow(grid[y]);rotate(1)}
if(dir==3){rotate(1);for(let y=0;y<size;y++)grid[y]=compressRow(grid[y]);rotate(3)}
if(before!==JSON.stringify(grid)){spawn();draw();checkEnd()}
}
function movesLeft(){
for(let y=0;y<size;y++)for(let x=0;x<size;x++){
if(!grid[y][x])return true;
if(x<size-1&&grid[y][x]==grid[y][x+1])return true;
if(y<size-1&&grid[y][x]==grid[y+1][x])return true;
}return false
}
function checkEnd(){if(!movesLeft())alert('Game over! Score: '+score)}
function reset(){init()}
addEventListener('keydown',e=>{
const k=e.key.toLowerCase();if(['arrowleft','a'].includes(k))move(0);
else if(['arrowup','w'].includes(k))move(1);
else if(['arrowright','d'].includes(k))move(2);
else if(['arrowdown','s'].includes(k))move(3);
});
init();
</script>
