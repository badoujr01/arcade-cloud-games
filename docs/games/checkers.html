<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>VX PLAY – CHECKERS</title>
    <link rel="manifest" href="manifest.webmanifest" />
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <div id="stars-bg"></div>

    <!-- Splash / Start Screen -->
    <div id="splash" class="splash" aria-hidden="true">
      <div class="splash-inner">
        <div class="logo">VX PLAY <span>CHECKERS</span></div>
        <div class="splash-anim">
          <img src="assets/svg/nebula.svg" alt="Loading nebula" />
        </div>
        <div class="splash-actions">
          <button id="splash-start" class="primary">Start</button>
          <button id="splash-settings" aria-haspopup="dialog" title="Settings"><img src="assets/ui/gear.svg" alt="Settings"></button>
          <button id="splash-about" title="About"><img src="assets/ui/crown.svg" alt="About"></button>
        </div>
        <div class="splash-toggles">
          <label class="toggle small">
            <input type="checkbox" id="toggle-bestof3" />
            <span>Best-of-3</span>
          </label>
        </div>
        <div id="profile-link" class="profile-link" role="button" tabindex="0" aria-label="Open profile and stats">
          <img src="assets/ui/trophy.svg" alt="Profile" /> Profile & Stats
        </div>
      </div>
    </div>

    <header class="topbar">
      <h1>VX PLAY – CHECKERS</h1>
      <div class="controls-group">
        <button id="btn-pause" aria-pressed="false">Pause</button>
        <button id="btn-restart">Restart</button>
        <button id="btn-settings" aria-haspopup="dialog">Settings</button>
      </div>
    </header>

    <main class="layout">
      <section class="side-panel">
        <div class="panel-block">
          <h2>Player</h2>
          <div class="timer">
            <span id="player-timer-text">30.0s</span>
            <div class="bar"><div id="player-timer-bar"></div></div>
          </div>
        </div>
        <div class="panel-block">
          <h2>AI <small id="ai-diff-label">(Easy)</small></h2>
          <div class="timer thinking">
            <span id="ai-timer-text">--</span>
            <div class="bar"><div id="ai-timer-bar"></div></div>
          </div>
        </div>
        <div class="panel-block">
          <h3>Status</h3>
          <div id="status-text">Loading…</div>
        </div>
        <div class="panel-block">
          <label class="toggle">
            <input type="checkbox" id="toggle-sounds" checked />
            <span>Sounds</span>
          </label>
          <label class="toggle">
            <input type="checkbox" id="toggle-hints" checked />
            <span>Hints</span>
          </label>
        </div>
      </section>

      <section class="board-wrap">
        <div id="countdown" aria-live="polite" hidden>
          <span id="countdown-number">3</span>
        </div>
        <div id="capture-note" class="capture-note" hidden>Capture required</div>
        <div id="ai-thinking" class="ai-thinking" hidden>
          <img src="assets/svg/nebula.svg" alt="AI thinking" />
          <svg class="ring" viewBox="0 0 36 36" aria-hidden="true">
            <path class="bg" d="M18 2 a 16 16 0 0 1 0 32 a 16 16 0 0 1 0 -32" />
            <path id="ai-ring" class="fg" d="M18 2 a 16 16 0 0 1 0 32 a 16 16 0 0 1 0 -32" />
          </svg>
        </div>
        <canvas id="particles" class="particles" aria-hidden="true"></canvas>
        <div id="board" class="board" role="grid" aria-label="Checkers board"></div>
      </section>
    </main>

    <dialog id="settings-dialog">
      <form method="dialog" class="settings-form">
        <h2>Settings</h2>
        <label>
          Mode
          <select id="mode">
            <option value="ai">Vs AI</option>
            <option value="local">Local 2-Player</option>
            <option value="online" disabled>Online (Coming soon)</option>
          </select>
        </label>
        <label>
          Difficulty
          <select id="difficulty">
            <option value="easy">Easy (3s)</option>
            <option value="medium">Medium (6s)</option>
            <option value="hard">Hard (12s)</option>
          </select>
        </label>
        <label>
          Your Side
          <select id="player-side">
            <option value="dark">Dark (moves first)</option>
            <option value="light">Light</option>
          </select>
        </label>
        <label>
          Theme
          <select id="theme">
            <option value="cosmic">Cosmic Blue</option>
            <option value="solar">Solar Flare</option>
            <option value="nebula" disabled>Nebula Purple (unlock 3 wins)</option>
          </select>
        </label>
        <label class="toggle">
          <input type="checkbox" id="toggle-ambient" checked />
          <span>Ambient Soundtrack</span>
        </label>
        <menu>
          <button value="cancel">Close</button>
          <button id="apply-settings" value="default">Apply</button>
        </menu>
      </form>
    </dialog>

    <dialog id="endgame-dialog" aria-label="Game result">
      <form method="dialog" class="endgame">
        <div class="result-icon"><img id="result-icon" src="assets/ui/trophy.svg" alt="Result"></div>
        <h2 id="result-title">You Win</h2>
        <p id="result-detail"></p>
        <menu>
          <button id="btn-play-again" value="default">Play Again</button>
          <button id="btn-change-diff">Change Difficulty</button>
          <button id="btn-back-splash">Back to Splash</button>
        </menu>
      </form>
    </dialog>

    <section class="readme">
      <h2>README – How to Play</h2>
      <p>
        Checkers is played on the dark squares of the 8×8 board. Pieces move
        diagonally forward one square. If an opponent’s piece is diagonally
        adjacent with an empty square beyond, you must jump to capture it. Multiple
        jumps are allowed in a single turn. When a piece reaches the far row, it
        becomes a King and may move/ capture diagonally in both directions.
      </p>
      <ul>
        <li><strong>Goal</strong>: capture all opponent pieces or block all moves.</li>
        <li><strong>Turns</strong>: you vs AI. You have a 30s timer per turn.</li>
        <li><strong>Difficulty</strong>: adjust AI thinking time in Settings.</li>
        <li><strong>Controls</strong>: click/ tap a piece, then a highlighted square.</li>
        <li><strong>Hints</strong>: toggle to highlight legal moves.</li>
        <li><strong>Offline</strong>: the game runs fully offline.</li>
      </ul>
    </section>

    <script src="rules/engine.js"></script>
    <script src="ui/theme.js"></script>
    <script src="ui/sfx.js"></script>
    <script src="ui/particles.js"></script>
    <script src="ui/mode.js"></script>
    <script src="ui/splash.js"></script>
    <script src="net/messages.js" type="module"></script>
    <script src="net/transport.js" type="module"></script>
    <script src="ai.js"></script>
    <script src="game.js"></script>
    <script>
      if ('serviceWorker' in navigator) {
        window.addEventListener('load', function() { navigator.serviceWorker.register('service-worker.js').catch(()=>{}); });
      }
    </script>
  </body>
  </html>


