<!doctype html><meta charset="utf-8"><title>Minesweeper</title>
<style>
body{margin:0;background:#0e1320;color:#fff;font-family:system-ui;text-align:center}
#g{display:inline-grid;grid-template-columns:repeat(12,28px);gap:6px;margin:12px;background:#101934;padding:12px;border-radius:12px}
.c{width:28px;height:28px;border-radius:6px;background:#263268;display:flex;align-items:center;justify-content:center;cursor:pointer;font-weight:700}
.o{background:#35407f} .m{background:#d9534f}
button{background:#2f376e;color:#fff;border:0;border-radius:6px;padding:6px 10px;margin-top:8px}
</style>
<h3>Minesweeper (12×12, 20 mines)</h3>
<div id="g"></div><div><button onclick="reset()">New</button></div>
<script>
const W=12,H=12,MINES=20;let grid,opened,flags;
function idx(x,y){return y*W+x}
function neighbors(x,y){const n=[];for(let dy=-1;dy<=1;dy++)for(let dx=-1;dx<=1;dx++){
if(dx||dy){let nx=x+dx,ny=y+dy;if(nx>=0&&ny>=0&&nx<W&&ny<H)n.push([nx,ny])}}return n}
function reset(){
grid=Array(W*H).fill(0);opened=new Set();flags=new Set();
let placed=0;while(placed<MINES){let i=Math.random()*W*H|0;if(grid[i]!=9){grid[i]=9;placed++}}
for(let y=0;y<H;y++)for(let x=0;x<W;x++){if(grid[idx(x,y)]==9)continue;
grid[idx(x,y)]=neighbors(x,y).filter(([nx,ny])=>grid[idx(nx,ny)]==9).length}
draw();
}
function draw(){
const g=document.getElementById('g');g.innerHTML='';
for(let y=0;y<H;y++)for(let x=0;x<W;x++){
const i=idx(x,y),d=document.createElement('div');d.className='c';d.oncontextmenu=e=>{e.preventDefault();toggleFlag(i)};
d.onclick=_=>open(i);d.textContent=flags.has(i)?'⚑':'';
if(opened.has(i)){d.classList.add('o');d.textContent=grid[i]==0?'':grid[i]}
g.appendChild(d);
}
}
function toggleFlag(i){if(opened.has(i))return;flags.has(i)?flags.delete(i):flags.add(i);draw()}
function open(i){
if(flags.has(i)||opened.has(i))return;
if(grid[i]==9){revealAll(true);return}
flood(i);draw();checkWin();
}
function flood(i){
const q=[i];while(q.length){const v=q.pop();if(opened.has(v))continue;opened.add(v);
if(grid[v]==0){const x=v%W,y=v/W|0;neighbors(x,y).forEach(([nx,ny])=>q.push(idx(nx,ny)))}
}
}
function revealAll(lose=false){for(let i=0;i<W*H;i++)if(grid[i]==9)opened.add(i);
draw();if(lose)alert('Boom!')}
function checkWin(){if(opened.size==W*H-MINES)alert('You win!')}
reset();
</script>
