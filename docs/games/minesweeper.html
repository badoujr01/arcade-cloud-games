<!doctype html><html lang="en"><meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1"><title>Minesweeper</title>
<style>
body{margin:0;background:#0b2258;color:#fff;font-family:system-ui}
header{display:flex;gap:8px;justify-content:center;align-items:center;padding:10px;flex-wrap:wrap}
.btn{background:#1c56ff;border:none;color:#fff;padding:8px 12px;border-radius:8px;font-weight:600}
select{background:#102b6b;color:#fff;border:1px solid #2a4ea6;border-radius:8px;padding:8px}
#wrap{display:grid;place-items:center;padding:10px}
#g{display:grid;gap:4px;margin:0 auto}
.c{background:#123b9a;border-radius:8px;height:34px;min-width:34px;display:grid;place-items:center;
font-weight:700;user-select:none;touch-action:manipulation}
.r{background:#0e2a72}
</style>
<body><header>
<label>Level:
<select id="lvl">
<option value="9x9x10">Easy (9√ó9, 10)</option>
<option value="12x12x24">Medium (12√ó12, 24)</option>
<option value="16x16x40">Hard (16√ó16, 40)</option>
</select>
</label>
<button class="btn" id="new">New</button>
<div>Flags: <b id="f">0</b>/<b id="tot">0</b></div>
</header>
<div id="wrap"><div id="g"></div></div>
<script>
let W=9,H=9,M=10,cells=[],flags=0,firstClick=true;
const g=document.getElementById('g'), fEl=document.getElementById('f'), tEl=document.getElementById('tot');
document.getElementById('lvl').onchange = ()=>{const [w,h,m]=document.getElementById('lvl').value.split('x').map(Number); W=w;H=h;M=m; newG(true);};
document.getElementById('new').onclick=()=>newG(true);

function neighbors(i){const r=i/W|0,c=i%W; const out=[]; for(let dr=-1;dr<=1;dr++)for(let dc=-1;dc<=1;dc++){
if(!dr&&!dc)continue; const rr=r+dr,cc=c+dc; if(rr>=0&&rr<H&&cc>=0&&cc<W) out.push(rr*W+cc);} return out;}
function layoutGrid(){ g.style.gridTemplateColumns=`repeat(${W},1fr)`; const size=Math.min(420, Math.min(innerWidth*.92, innerHeight*.6));
g.style.width=size+'px'; }

function plantMines(safe){ // ensure first tap never hits a mine
let left=M; while(left){
const i=Math.random()*(W*H)|0; if(i===safe) continue;
if(!cells[i].m){cells[i].m=true; left--}
}
cells.forEach((c,i)=>c.n=neighbors(i).filter(j=>cells[j].m).length);
}

function newG(resetFirst){
layoutGrid(); g.innerHTML=''; flags=0; fEl.textContent=flags; tEl.textContent=M;
if(resetFirst) firstClick=true;
cells=[...Array(W*H)].map(()=>( {m:false,r:false,f:false,n:0,el:null} ));
cells.forEach((c,i)=>{ const e=document.createElement('div'); e.className='c'; e.oncontextmenu=()=>false;
let t0=0,press=false;
e.addEventListener('touchstart',ev=>{press=true;t0=Date.now(); setTimeout(()=>{ if(press && Date.now()-t0>350) toggleFlag(i)},380)},{passive:true});
e.addEventListener('touchend',()=>{ if(press && Date.now()-t0<300) reveal(i); press=false });
e.addEventListener('mousedown',ev=>{ if(ev.button==2) toggleFlag(i); else reveal(i) });
c.el=e; g.appendChild(e);
});
}
function toggleFlag(i){ const c=cells[i]; if(c.r) return; c.f=!c.f; c.el.textContent=c.f?'‚öë':''; flags += c.f?1:-1; fEl.textContent=flags;}
function reveal(i){ const c=cells[i]; if(c.r||c.f) return;
if(firstClick){ plantMines(i); firstClick=false; }
c.r=true; c.el.classList.add('r');
if(c.m){ c.el.textContent='üí£'; setTimeout(()=>alert('Boom!'),10); return; }
if(c.n){ c.el.textContent=c.n; } else { neighbors(i).forEach(reveal) }
if(cells.every(x=>x.r||x.m)) setTimeout(()=>alert('You win!'),10);
}
newG(true);
</script><div style="position:fixed;top:20px;right:20px;z-index:9999;">
  <a href="https://badoujr01.github.io/arcade-cloud-games/"
     style="background:#0D47A1;color:white;padding:10px 16px;border-radius:8px;text-decoration:none;font-weight:bold;box-shadow:0 4px 8px rgba(0,0,0,0.3);transition:background 0.2s;"
     onmouseover="this.style.background='#1565C0'"
     onmouseout="this.style.background='#0D47A1'">
    ‚Üê Back to Arcade Cloud
  </a>
</div></body></html>


