<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>15 Puzzle</title>
<style>
:root{--bg:#0b2a5a;--card:#0e3780;--tile:#1c57c7;--tile2:#1749a6;--text:#fff;}
html,body{height:100%;margin:0;background:linear-gradient(135deg,var(--bg),#062246);font-family:system-ui,Segoe UI,Roboto,Arial,sans-serif;color:var(--text);}
.wrap{max-width:420px;margin:40px auto;padding:16px}
h1{font-size:20px;margin:0 0 12px}
.bar{display:flex;gap:8px;align-items:center;margin-bottom:12px}
button{background:var(--tile);border:none;color:#fff;padding:10px 12px;border-radius:10px;cursor:pointer;font-weight:600}
button:hover{filter:brightness(1.1)}
.board{display:grid;grid-template-columns:repeat(4,1fr);gap:8px;background:var(--card);padding:8px;border-radius:14px;box-shadow:0 8px 30px #0005}
.cell{aspect-ratio:1/1;background:var(--tile);display:grid;place-items:center;border-radius:12px;font-size:26px;font-weight:800;user-select:none;transition:transform .08s}
.cell:nth-child(odd){background:var(--tile2)}
.empty{background:transparent;box-shadow:inset 0 0 0 2px #ffffff22}
.meta{opacity:.8;margin-top:10px;font-size:13px}
</style>
</head>
<body>
<div class="wrap">
<h1>15 Puzzle</h1>
<div class="bar">
<button id="shuffleBtn">Shuffle</button>
<button id="solveBtn">Solve</button>
<div class="meta" id="moves">Moves: 0</div>
</div>
<div class="board" id="board"></div>
<div class="meta">Tip: click a tile next to the empty square to slide it.</div>
</div>

<script>
const boardEl = document.getElementById('board');
const movesEl = document.getElementById('moves');
const N = 4;
let tiles = [], moves = 0;

function makeSolved(){
tiles = Array.from({length:16},(_,i)=> i===15 ? 0 : i+1);
}
function render(){
boardEl.innerHTML = '';
tiles.forEach((v,idx)=>{
const div = document.createElement('div');
div.className = 'cell' + (v===0?' empty':'');
if(v!==0) div.textContent = v;
div.onclick = ()=> tryMove(idx);
boardEl.appendChild(div);
});
movesEl.textContent = `Moves: ${moves}`;
}
function pos(i){ return {r: (i/ N)|0, c: i%N}; }
function neighbors(i){
const {r,c}=pos(i);
const list=[];
if(r>0) list.push((r-1)*N+c);
if(r<N-1) list.push((r+1)*N+c);
if(c>0) list.push(r*N+c-1);
if(c<N-1) list.push(r*N+c+1);
return list;
}
function tryMove(i){
const empty = tiles.indexOf(0);
if(neighbors(i).includes(empty)){
[tiles[i], tiles[empty]] = [tiles[empty], tiles[i]];
moves++;
render();
if(isSolved()) alert('ðŸŽ‰ Solved in '+moves+' moves!');
}
}
function isSolved(){
for(let i=0;i<15;i++) if(tiles[i]!==i+1) return false;
return tiles[15]===0;
}
// Fisherâ€“Yates shuffle until solvable
function shuffle(){
moves=0;
do{
for(let i=tiles.length-1;i>0;i--){
const j = Math.floor(Math.random()*(i+1));
[tiles[i],tiles[j]]=[tiles[j],tiles[i]];
}
} while(!isSolvable(tiles));
render();
}
function inversions(arr){
const a = arr.filter(x=>x!==0);
let inv=0;
for(let i=0;i<a.length;i++) for(let j=i+1;j<a.length;j++) if(a[i]>a[j]) inv++;
return inv;
}
function isSolvable(arr){
const inv = inversions(arr);
const rowFromBottom = N - pos(arr.indexOf(0)).r;
// For 4x4: even grid -> blank on even row from bottom when inversions odd, or odd row when inversions even
return (rowFromBottom%2===0) ? (inv%2===1) : (inv%2===0);
}
document.getElementById('shuffleBtn').onclick = shuffle;
document.getElementById('solveBtn').onclick = ()=>{ makeSolved(); moves=0; render(); };

makeSolved(); shuffle(); // start shuffled
</script>
</body>
</html>

