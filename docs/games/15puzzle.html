<!doctype html><html lang="en"><meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1"><title>15 Puzzle</title>
<style>
body{margin:0;background:#0b2258;color:#fff;font-family:system-ui}
header{display:flex;gap:8px;justify-content:center;padding:10px}
.btn{background:#1c56ff;border:none;color:#fff;padding:8px 12px;border-radius:8px;font-weight:600}
#board{width:min(92vw,420px);aspect-ratio:1;margin:10px auto;display:grid;grid-template-columns:repeat(4,1fr);gap:8px}
.t{display:grid;place-items:center;background:#123b9a;border-radius:12px;font-size:28px;user-select:none;box-shadow:0 8px 24px rgba(0,0,0,.35)}
.empty{background:#0e2a72}
</style>
<body>
<header>
<button class="btn" id="shuffle">Shuffle</button>
<button class="btn" id="restart">Restart</button>
<div>Moves: <b id="moves">0</b></div>
<div>Time: <b id="time">0</b>s</div>
</header>
<div id="board"></div>
<script>
const b=document.getElementById('board'), mv=document.getElementById('moves'), tm=document.getElementById('time');
let tiles=[...Array(15).keys()].map(x=>x+1).concat(0), start=tiles.slice(), moves=0, t0, timer, empty=15;
function render(){ b.innerHTML=''; tiles.forEach((v,i)=>{ const d=document.createElement('div'); d.className='t'+(v? '':' empty'); d.textContent=v||''; d.dataset.i=i; b.appendChild(d); }); mv.textContent=moves;}
function pos(i){return [i/4|0, i%4]} function idx(r,c){return r*4+c}
function neigh(i){const [r,c]=pos(i); return [[r-1,c],[r+1,c],[r,c-1],[r,c+1]].filter(([rr,cc])=>rr>=0&&rr<4&&cc>=0&&cc<4).map(([rr,cc])=>idx(rr,cc))}
function move(i){ if(neigh(i).includes(empty)){ [tiles[i],tiles[empty]]=[tiles[empty],tiles[i]]; empty=i; moves++; render(); checkWin(); } }
function checkWin(){ if(tiles.every((v,i)=>v=== (i<15?i+1:0))){ clearInterval(timer); alert(`Solved in ${moves} moves, ${((Date.now()-t0)/1000|0)}s!`) } }
function shuffle(){ tiles=start.slice(); empty=15; // Fisher-Yates with solvability
do{ for(let i=tiles.length-1;i>0;i--){ const j=Math.random()*(i+1)|0; [tiles[i],tiles[j]]=[tiles[j],tiles[i]] }
empty=tiles.indexOf(0);
}while( (invCount(tiles)+ (empty/4|0))%2==1 ); moves=0; t0=Date.now(); clearInterval(timer); timer=setInterval(()=>tm.textContent=((Date.now()-t0)/1000|0),1000); render(); }
function invCount(a){ let inv=0; for(let i=0;i<15;i++) for(let j=i+1;j<16;j++) if(a[i]&&a[j]&&a[i]>a[j]) inv++; return inv;}
b.addEventListener('click',e=>{ const d=e.target.closest('.t'); if(!d)return; move(+d.dataset.i) });
// swipe
let sx=0, sy=0; b.addEventListener('touchstart',e=>{sx=e.touches[0].clientX; sy=e.touches[0].clientY},{passive:true});
b.addEventListener('touchend',e=>{const dx=e.changedTouches[0].clientX-sx, dy=e.changedTouches[0].clientY-sy; if(Math.max(Math.abs(dx),Math.abs(dy))<20)return;
const [er,ec]=pos(empty); let src;
if(Math.abs(dx)>Math.abs(dy)){ src=idx(er, ec+(dx>0?-1:1)); } else { src=idx(er+(dy>0?-1:1), ec); }
if(src>=0&&src<16) move(src);
},{passive:true});
document.getElementById('shuffle').onclick=shuffle;
document.getElementById('restart').onclick=()=>{tiles=start.slice(); empty=15; moves=0; clearInterval(timer); tm.textContent='0'; render();}
shuffle();
</script><div style="position:fixed;top:20px;right:20px;z-index:9999;">
  <a href="https://badoujr01.github.io/arcade-cloud-games/"
     style="background:#0D47A1;color:white;padding:10px 16px;border-radius:8px;text-decoration:none;font-weight:bold;box-shadow:0 4px 8px rgba(0,0,0,0.3);transition:background 0.2s;"
     onmouseover="this.style.background='#1565C0'"
     onmouseout="this.style.background='#0D47A1'">
    ‚Üê Back to voltXplay
  </a>
</div></body></html>


