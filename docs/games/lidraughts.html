<!doctype html><html lang="en"><meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1"><title>Checkers</title>
<style>
body{margin:0;background:#0b2258;color:#fff;font-family:system-ui}
header{display:flex;gap:8px;justify-content:center;padding:10px}
.btn{background:#1c56ff;border:none;color:#fff;padding:8px 12px;border-radius:8px;font-weight:600}
#b{width:min(92vw,520px);aspect-ratio:1;margin:10px auto;border-radius:12px;overflow:hidden;box-shadow:0 12px 40px rgba(0,0,0,.35)}
.r{display:grid;grid-template-columns:repeat(8,1fr);height:12.5%}
.s{display:grid;place-items:center;font-size:22px;user-select:none}
.d{background:#573b21}.l{background:#d7b899}
.p{width:70%;aspect-ratio:1;border-radius:50%}
.w{background:#fff}.bk{background:#111}.sel{outline:4px solid #00e0ff;outline-offset:-4px}
.k::after{content:"â™›";color:#ff0;font-weight:700}
</style>
<body>
<header>
<button class="btn" id="res">Restart</button>
<div>Turn: <b id="t">White</b></div>
</header>
<div id="b"></div>
<script>
let T='w', sel=null; const tEl=document.getElementById('t'), b=document.getElementById('b');
const N=8; let S=[...Array(N*N)].map((_,i)=>{const r=i>>3,c=i&7; if((r+c)%2==0) return '';
if(r<3) return 'b'; if(r>4) return 'w'; return ''});
function rc(i){return [i>>3,i&7]} function iOf(r,c){return r*8+c}
function inB(r,c){return r>=0&&r<8&&c>=0&&c<8}
function render(){
b.innerHTML=''; for(let r=0;r<8;r++){const R=document.createElement('div'); R.className='r';
for(let c=0;c<8;c++){const i=iOf(r,c), d=document.createElement('div');
d.className='s '+(((r+c)&1)?'d':'l'); d.dataset.i=i;
const p=S[i]; if(p){ const e=document.createElement('div'); e.className='p '+(p[0]=='w'?'w':'bk'); if(p[1]=='k')e.classList.add('k'); d.appendChild(e) }
R.appendChild(d);
} b.appendChild(R);
}
}
function moves(i){
const p=S[i]; if(!p || p[0]!=T) return [];
const [r,c]=rc(i), isW=p[0]=='w', king=p[1]=='k';
const dirs = king?[[1,1],[1,-1],[-1,1],[-1,-1]]:(isW?[[-1,-1],[-1,1]]:[[1,-1],[1,1]]);
const out=[];
dirs.forEach(([dr,dc])=>{
const r1=r+dr,c1=c+dc,r2=r+2*dr,c2=c+2*dc;
if(inB(r1,c1)&&S[iOf(r1,c1)]==''){ out.push([i,iOf(r1,c1),null]) }
if(inB(r2,c2)&&S[iOf(r1,c1)] && S[iOf(r1,c1)][0]!==T && S[iOf(r2,c2)]==''){ out.push([i,iOf(r2,c2),iOf(r1,c1)]) }
});
// forced capture rule
const caps=out.filter(m=>m[2]!=null); return caps.length?caps:out;
}
function anyCapture(){ for(let i=0;i<64;i++) if(S[i] && S[i][0]==T && moves(i).some(m=>m[2]!=null)) return true; return false}
b.addEventListener('click',e=>{
const s=e.target.closest('.s'); if(!s)return; const i=+s.dataset.i;
if(sel==null){ if(S[i] && S[i][0]==T){ sel=i; s.classList.add('sel'); } return; }
const ms=moves(sel); const m=ms.find(([a,b])=>b==i);
[...b.querySelectorAll('.sel')].forEach(x=>x.classList.remove('sel'));
if(m){ const [a,bx,cap]=m; const p=S[a]; S[a]=''; if(cap!=null) S[cap]=''; S[bx]=p;
const [r,c]=rc(bx); if(p=='w' && r==0) S[bx]='wk'; if(p=='b' && r==7) S[bx]='bk';
// multi-capture
if(cap!=null){ const chain=moves(bx).filter(m=>m[2]!=null); if(chain.length){ sel=bx; render(); b.querySelector(`[data-i="${bx}"]`).classList.add('sel'); return; } }
T=T=='w'?'b':'w'; tEl.textContent=T=='w'?'White':'Black'; render();
} sel=null;
});
document.getElementById('res').onclick=()=>{location.reload()};
render();
</script>
</body></html>

